{%extends 'admins/home.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>update user</title>
</head>
<body>
    {%block main%}
    <div class="card" style="width: 100%; height: 500px;top: 70px;">
        <div class="card-header">
            <h5>Update {{user.uname}} Information</h5>
        </div>
              <div class="card-body">         
        <form action="" method="post">
            {%csrf_token%}
        
            <div class="row">
                <div class="col-6">
        <label for="" class="form-label">username</label>
        <input type="text" class="form-control" name="uname" value="{{user.uname}}">
        <label for="" class="form-label">first_name</label>
        <input type="text" class="form-control" name="fname" value="{{user.fname}}">
        <label for="" class="form-label">last_name</label>
        <input type="text" class="form-control" name="lname" value="{{user.lname}}">
        <label for="" class="form-label">age</label>
        <input type="date" mina="2000-01-01" maxa="1945-12-31" value="{{user.age}}" value="2000-01-01"  class="form-control" name="age">
        <label for="" class="form-label">username</label>
        <select class="form-control" name="gender" value="{{user.gender}}" >
        <option value="male">male</option>
        <option value="female">female</option>
        </select>
        <label for="" class="form-label">type</label>
        <select name="role" id="" class="form-control" value="{{user.role}}">
            
            <option value="1">student</option>
            <option value="2">teacher</option>
            <option value="3">director</option>
            <option value="4">head</option>
        </select>
        <input type="hidden" name="image" id="image" value="" >
        <input type="hidden" id="tmp" value="{{user.image}}">
                </div>
               
                <div class="col-6">
                    <div class="display">
                        <img src="" alt="no image" id="im" srcset="" style="width:  250px;height: 250px;border: 1px solid black;border-radius: 20px;">
                    </div>
                    <br>
                    <div class="" style="top: 380px;">
                        <label for="" class="form-label">Upload Image</label>
                        <input type="file" class="form-control" name="" id="img" style="width: 250px;">
                    </div>
                    
                </div>
            </div>
            <br>
            <button class="btn btn-primary" style="width: 100%;">Update User</button>
        </form></div>
    <div class="card-footer">
<ul>
    <li><a href="{%url 'main:delete_users' user.id %}">delete</a></li>
</ul>
    </div>
    </div>
        <script>
var imgs=document.getElementById('tmp').value;
var im=document.getElementById('im');
im.setAttribute("src",imgs);
var img=document.getElementById('img');
img.addEventListener('change',(e)=>{
    const file=img.files[0];
    const reader=new FileReader();
    reader.addEventListener('load',()=>{
        var im=document.getElementById('im');
        var image=document.getElementById('image');
        image.setAttribute("value",reader.result);
        im.setAttribute("src",reader.result);
        localStorage.setItem("img",reader.result)

    })
    reader.readAsDataURL(file);
})
        </script>
    {%endblock%}
</body>
</html>