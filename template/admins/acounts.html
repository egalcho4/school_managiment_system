{%extends 'admins/home.html'%}
{%load static%}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>accounts</title>
</head>
<script src="{%static 'js/index.js' %}"></script>
<body>
    {%block main%}
    <br><br>
    <div class="row">
        <div class="col-10">
            <div class="" id="form" style="display: none;">
                <div class="card" style="">
<div class="card-header">
    <h5>fill the form and create users</h5>
</div>
      <div class="card-body">         
<form action="" method="post">
    {%csrf_token%}

    <div class="row">
        <div class="col-6">
<label for="" class="form-label">username</label>
<input type="text" class="form-control" name="uname">
<label for="" class="form-label">first_name</label>
<input type="text" class="form-control" name="fname">
<label for="" class="form-label">last_name</label>
<input type="text" class="form-control" name="lname">
<label for="" class="form-label">age</label>
<input type="date" mina="2000-01-01" maxa="1945-12-31" value="2000-01-01"  class="form-control" name="age">
<label for="" class="form-label">username</label>
<select class="form-control" name="gender" >
<option value="male">male</option>
<option value="female">female</option>
</select>
<label for="" class="form-label">type</label>
<select name="role" id="" class="form-control">
    
    <option value="1">student</option>
    <option value="2">teacher</option>
    <option value="3">director</option>
    <option value="4">head</option>
</select>
<input type="hidden" name="image" id="image" value="">
        </div>
       
        <div class="col-6">
            <div class="display">
                <img src="" alt="no image" id="im" srcset="" style="width:  250px;height: 250px;border: 1px solid black;border-radius: 20px;">
            </div>
            <br>
            <div class="" style="top: 380px;">
                <label for="" class="form-label">Upload Image</label>
                <input type="file" class="form-control" name="" id="img" style="width: 250px;">
            </div>
            
        </div>
    </div>
    <br>
    <button class="btn btn-primary" style="width: 100%;">Create users</button>
</form></div></div>
            </div>
            <div class="" id="user_list">
                <div class="card">
                <div class="student" id="student">

               
                    <div class="card-header">
                        <h5>List Of Students</h5>
                    </div>
                    <div class="card-body">
                       
                        
                <table class="table table-striped table-condesed">
                    <thead>
                        <th>No</th>
                        <th>username</th>
                        <th>first_name</th>
                        <th>last_name</th>
                        <th>age</th>
                        <th>gender</th>
                        <th>role</th>
                        <th>image</th>
                        <th>Update</th>
                    </thead>
                    <tbody>
                        {%for u in user %}
                        <tr>
                            <td>{{forloop.counter}}</td>
                            <td>{{u.uname}}</td>
                            <td>{{u.fname}}</td>
                            <td>{{u.lname}}</td>
                            <td>{{u.age}}</td>
                            <td>{{u.gender}}</td>
                            <td>{{u.role}}</td>
                            <td><img src="{{u.image}}" style="width: 40px; height: 40px;" alt=""></td>
                            <td><a href="{%url 'main:update_users' u.id %}">view</a></td>
                        </tr>
                        {%endfor%}
                        
                    </tbody>

                </table>
                </div>
                </div>
                <div class="teacher" style="display: none;" id="teacher">
                    
                        <div class="card-header">
                            <h5>List Of Teacher</h5>
                        </div>
                        <div class="card-body">
                           
                    <table class="table table-striped table-condesed">
                        <thead>
                            <th>No</th>
                            <th>username</th>
                            <th>first_name</th>
                            <th>last_name</th>
                            <th>age</th>
                            <th>gender</th>
                            <th>role</th>
                            <th>image</th>
                            <th>Update</th>
                        </thead>
                        <tbody>
                            {%for u in teach %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{u.uname}}</td>
                                <td>{{u.fname}}</td>
                                <td>{{u.lname}}</td>
                                <td>{{u.age}}</td>
                                <td>{{u.gender}}</td>
                                <td>{{u.role}}</td>
                                <td><img src="{{u.image}}" style="width: 40px; height: 40px;" alt=""></td>
                                <td><a href="{%url 'main:update_users' u.id %}">view</a></td>
                            </tr>
                            {%endfor%}
                            
                        </tbody>
    
                    </table>
                    </div>
                </div>
                <div class="director" style="display: none;" id="director">
                    
                        <div class="card-header">
                            <h5>List Of Director</h5>
                        </div>
                        <div class="card-body">
                           
                    <table class="table table-striped table-condesed">
                        <thead>
                            <th>No</th>
                            <th>username</th>
                            <th>first_name</th>
                            <th>last_name</th>
                            <th>age</th>
                            <th>gender</th>
                            <th>role</th>
                            <th>image</th>
                            <th>Update</th>
                        </thead>
                        <tbody>
                            {%for u in dir %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{u.uname}}</td>
                                <td>{{u.fname}}</td>
                                <td>{{u.lname}}</td>
                                <td>{{u.age}}</td>
                                <td>{{u.gender}}</td>
                                <td>{{u.role}}</td>
                                <td><img src="{{u.image}}" style="width: 40px; height: 40px;" alt=""></td>
                                <td><a href="{%url 'main:update_users' u.id %}">view</a></td>
                            </tr>
                            {%endfor%}
                            
                        </tbody>
    
                    </table>
                    </div>
                </div>
                <div class="head" style="display: none;" id="head">
                    
                        <div class="card-header">
                            <h5>List Of Head</h5>
                        </div>
                        <div class="card-body">
                           
                    <table class="table table-striped table-condesed">
                        <thead>
                            <th>No</th>
                            <th>username</th>
                            <th>first_name</th>
                            <th>last_name</th>
                            <th>age</th>
                            <th>gender</th>
                            <th>role</th>
                            <th>image</th>
                            <th>Update</th>
                        </thead>
                        <tbody>
                            {%for u in head %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{u.uname}}</td>
                                <td>{{u.fname}}</td>
                                <td>{{u.lname}}</td>
                                <td>{{u.age}}</td>
                                <td>{{u.gender}}</td>
                                <td>{{u.role}}</td>
                                <td><img src="{{u.image}}" style="width: 40px; height: 40px;" alt=""></td>
                                <td><a href="{%url 'main:update_users' u.id %}">view</a></td>
                            </tr>
                            {%endfor%}
                            
                        </tbody>
    
                    </table>
                    </div>
                </div>
</div>
            </div>
        </div>
        <div class="col-2">
            <button class="btn btn-success" style="top:70px;float: right;" onclick="adduser()">&plus;add new user</button>
        <ul style="list-style-type: none;">
            <li><input type="radio" name="sel"  value="1">&nbsp;student</li>
            <li><input type="radio" name="sel" value="2">&nbsp;teacher</li>
            <li><input type="radio" name="sel" value="3">&nbsp;director</li>
            <li><input type="radio" name="sel" value="4">&nbsp;head</li>
            <button onclick="set_this()" class="btn btn-success" style="width: 100%;">set</button>

        </ul>
        </div>
    </div>
    <script>
        function adduser(){
    var form=document.getElementById('form');
    var user_list=document.getElementById('user_list');
    user_list.style.display="none";
    form.style.display="block";
}
var imgs=localStorage.getItem("img");
var im=document.getElementById('im');
        im.setAttribute("src",imgs);
var img=document.getElementById('img');
img.addEventListener('change',(e)=>{
    const file=img.files[0];
    const reader=new FileReader();
    reader.addEventListener('load',()=>{
        var im=document.getElementById('im');
        var image=document.getElementById('image');
        image.setAttribute("value",reader.result);
        im.setAttribute("src",reader.result);
        localStorage.setItem("img",reader.result)

    })
    reader.readAsDataURL(file);
})
function set_this(){
var id=document.querySelector('input[name="sel"]:checked').value;

    
    var stud=document.querySelector('#student');
        var teacher=document.querySelector('#teacher');
        var director=document.querySelector('#director');
        var head=document.querySelector('#head');

        
    if (id==1){
        
        stud.style.display="block";
        teacher.style.display="none";
        director.style.display="none";
        head.style.display="none";
    }else if(id==2){
        
        stud.style.display="none";
        teacher.style.display="block";
        director.style.display="none";
        head.style.display="none";
    }else if(id==3){
       
        stud.style.display="none";
        teacher.style.display="none";
        director.style.display="block";
        head.style.display="none";
    }else if(id==4){
       
        stud.style.display="none";
        teacher.style.display="none";
        director.style.display="none";
        head.style.display="block";
    }

}
    </script>
    {%endblock%}
</body>
</html>